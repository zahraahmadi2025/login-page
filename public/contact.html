
<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ø¯ÙØªØ±Ú†Ù‡ Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†</title>
    <link rel="stylesheet" href="../src/output.css">
    
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center p-4">

    <h1 class="text-3xl font-bold mb-6">Ø¯ÙØªØ±Ú†Ù‡ Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†</h1>

    <form id="contact-form" class="bg-white p-6 rounded shadow-md w-full max-w-md mb-6">
        <div class="mb-4">
            <label for="name" class="block mb-1 font-semibold">Ù†Ø§Ù…</label>
            <input type="text" id="name" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="Ù†Ø§Ù… Ù…Ø®Ø§Ø·Ø¨" required />
        </div>
        <div class="mb-4">
            <label for="phone" class="block mb-1 font-semibold">Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†</label>
            <input type="tel" id="phone" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†" required pattern="^\+?\d{10,15}$" title="Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯" />
        </div>
        <div class="mb-4">
            <label for="email" class="block mb-1 font-semibold">Ø§ÛŒÙ…ÛŒÙ„</label>
            <input type="email" id="email" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="Ø§ÛŒÙ…ÛŒÙ„" required />
        </div>
        <input type="hidden" id="contact-id" />
        <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition">Ø«Ø¨Øª Ù…Ø®Ø§Ø·Ø¨</button>
    </form>

    <div class="bg-white rounded shadow-md w-full max-w-md p-4">
        <h2 class="text-2xl font-semibold mb-4">Ù„ÛŒØ³Øª Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†</h2>
        <ul id="contact-list" class="space-y-3">
            <!-- Ù…Ø®Ø§Ø·Ø¨ÛŒÙ† Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
        </ul>
    </div>

    <script>
        // Ú©Ù„ÛŒØ¯ Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± LocalStorage
        const STORAGE_KEY = 'contacts';

        // Ø¯Ø±ÛŒØ§ÙØª Ø¹Ù†Ø§ØµØ±
        const form = document.getElementById('contact-form');
        const nameInput = document.getElementById('name');
        const phoneInput = document.getElementById('phone');
        const emailInput = document.getElementById('email');
        const contactList = document.getElementById('contact-list');
        const contactIdInput = document.getElementById('contact-id');

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø§Ø² LocalStorage
        let contacts = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];

        // Ù†Ù…Ø§ÛŒØ´ Ù„ÛŒØ³Øª Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†
        function renderContacts() {
            contactList.innerHTML = '';
            if (contacts.length === 0) {
                contactList.innerHTML = '<li class="text-gray-500">Ù…Ø®Ø§Ø·Ø¨ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</li>';
                return;
            }
            contacts.forEach(contact => {
                const li = document.createElement('li');
                li.className = 'flex justify-between items-center border p-3 rounded';

                li.innerHTML = `
                    <div>
                        <p class="font-semibold text-lg">${contact.name}</p>
                        <p class="text-sm text-gray-600">ğŸ“ ${contact.phone}</p>
                        <p class="text-sm text-gray-600">ğŸ“§ ${contact.email}</p>
                    </div>
                    <div class="space-x-2">
                        <button class="edit-btn bg-yellow-400 hover:bg-yellow-500 px-3 py-1 rounded text-white" data-id="${contact.id}">ÙˆÛŒØ±Ø§ÛŒØ´</button>
                        <button class="delete-btn bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-white" data-id="${contact.id}">Ø­Ø°Ù</button>
                    </div>
                `;

                contactList.appendChild(li);
            });

            // Ø§ÙØ²ÙˆØ¯Ù† Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø¨Ù‡ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = btn.getAttribute('data-id');
                    editContact(id);
                });
            });

            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = btn.getAttribute('data-id');
                    deleteContact(id);
                });
            });
        }

        // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¯Ø± LocalStorage
        function saveContacts() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(contacts));
        }

        // Ø§ÙØ²ÙˆØ¯Ù† ÛŒØ§ ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø®Ø§Ø·Ø¨
        form.addEventListener('submit', e => {
            e.preventDefault();

            const name = nameInput.value.trim();
            const phone = phoneInput.value.trim();
            const email = emailInput.value.trim();
            const id = contactIdInput.value;

            if (!name || !phone || !email) return;

            if (id) {
                // ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø®Ø§Ø·Ø¨ Ù…ÙˆØ¬ÙˆØ¯
                const index = contacts.findIndex(c => c.id === id);
                if (index !== -1) {
                    contacts[index] = { id, name, phone, email };
                }
            } else {
                // Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø®Ø§Ø·Ø¨ Ø¬Ø¯ÛŒØ¯
                const newContact = {
                    id: Date.now().toString(),
                    name,
                    phone,
                    email
                };
                contacts.push(newContact);
            }

            saveContacts();
            renderContacts();
            form.reset();
            contactIdInput.value = '';
            form.querySelector('button[type="submit"]').textContent = 'Ø«Ø¨Øª Ù…Ø®Ø§Ø·Ø¨';
        });

        // ØªØ§Ø¨Ø¹ Ø­Ø°Ù Ù…Ø®Ø§Ø·Ø¨
        function deleteContact(id) {
            if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ù…Ø®Ø§Ø·Ø¨ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ')) {
                contacts = contacts.filter(c => c.id !== id);
                saveContacts();
                renderContacts();
            }
        }

        // ØªØ§Ø¨Ø¹ ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø®Ø§Ø·Ø¨
        function editContact(id) {
            const contact = contacts.find(c => c.id === id);
            if (!contact) return;

            nameInput.value = contact.name;
            phoneInput.value = contact.phone;
            emailInput.value = contact.email;
            contactIdInput.value = contact.id;

            form.querySelector('button[type="submit"]').textContent = 'ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø®Ø§Ø·Ø¨';
            nameInput.focus();
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        renderContacts();
    </script>

</body>